
<h1>Application for:</h1>
<h2><%= @application_form.name %></h2>
<p><strong>Address:</strong> <%= @application_form.street_address %></p>
<p><strong>City:</strong> <%= @application_form.city %></p>
<p><strong>State:</strong> <%= @application_form.state %></p>
<p><strong>Zip:</strong> <%= @application_form.zip_code %></p>
<p><strong>Description:</strong> <%= @application_form.description %></p>
<p><strong>Application Status:</strong> <%= @application_form.status %></p>
<br>

<h3>Current pets:</h3>
  <div id="current-pets">
    <% @application_form.pets.each do |pet|%>
      <p><strong><%= link_to "#{pet.name}", "/pets/#{pet.id}/" %></strong></p>
    <% end %>
  </div>
<br>

<% if @application_form.can_be_submitted? %>
  <%= form_with url: "/application_forms/#{@application_form.id}/", method: :patch do |form| %>
    <strong><%= form.label "Why would you be a good owner for your selected pet(s)?" %></strong>
    <p><%= form.text_area :description %></p>
    <p><%= form.submit "Submit Application" %></p>
  <% end %>
<% end %>

<% if @application_form.in_progress? %>
  <h3>Add a Pet to this Application</h3>
  <%= form_with url: "/application_forms/#{@application_form.id}/", method: :get do |form| %>
    <%= form.label :query, "Search pets by name:" %>
    <%= form.text_field :query %>
    <%= form.submit "Submit Search" %>
  <% end %>
<% end %>

<% if params[:query] %>
  <% Pet.search(params[:query]).each do |pet| %>
    <p><strong><%= pet.name %></strong> <%= button_to "Adopt #{pet.name}", { controller: :application_forms, action: :add_pet, pet_id: pet.id }, method: :post %></p>
  <% end %>
<% end %>
